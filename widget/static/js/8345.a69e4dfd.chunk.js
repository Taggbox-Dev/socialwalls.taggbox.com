"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[8345],{68345:(t,e,a)=>{a.r(e),a.d(e,{default:()=>f});var o=a(72791),s=a(77581),n=a(79200),i=a(67945),l=a.n(i),p=a(2703),h=a(49671),r=a(42308),d=a(68329),m=a(80184);const c=(0,p.oF)(),u=(0,p.hz)();class g extends o.PureComponent{constructor(){super(...arguments),this.state={themeHeightMange:this.props.themeHeight,randomkey:0},this.onFullscreenChange=()=>{const{themeHeight:t,heightUpdate:e}=this.props;setTimeout((()=>{e(),this.setState({themeHeightMange:t,randomkey:Math.random()})}),100)}}componentDidMount(){if(c){const{themeHeight:t,heightUpdate:e}=this.props;window.addEventListener("resize",(()=>this.onFullscreenChange)),document.addEventListener("fullscreenchange",this.onFullscreenChange,!1),this.setState({themeHeightMange:t}),e()}}componentDidUpdate(){if(c)if(u)this.onFullscreenChange();else{const{themeHeight:t}=this.props;this.setState({themeHeightMange:t})}}render(){const{itemData:t,ThemeRule:e,personalization:a,clickToShowPopUp:o,itemIndex:s,wallID:n,ownerId:i}=this.props,{themeHeightMange:l}=this.state,u=2===t.type||3===t.type||4===t.type||5===t.type,g={backgroundColor:e.cardColor},w=e.trimcontent?(0,p.Sv)(t.content,200):t.content,C=32==e.numberOfCoumn?4:8==e.numberOfCoumn?2:3,f={padding:"".concat(e.padding/2,"px"),height:c?"".concat((window.innerHeight-l)/C,"px"):""},D={borderRadius:"".concat(e.borderRadius,"px")};return(0,m.jsx)("div",{id:"tb-sp-post-".concat(t.id),className:"tb_ap_post_wrapper ","tb-network":t.network.id,style:f,children:(0,m.jsx)("div",{className:"tb_ap_post_in","data-aos":null!==t&&void 0!==t&&t.stopAnimation?null:"zoom-in-up","data-aos-delay":"0","data-aos-duration":"2000","data-aos-offset":"0",onClick:o(s,t),children:(0,m.jsxs)("div",{className:"tb_ap_post_media_wrapp",style:D,children:[u?(0,m.jsx)(d.Z,{itemData:t,wallID:n}):"",(0,m.jsx)("div",{className:"overlay-main","data-aos":"zoom-in","data-aos-easing":"ease-out-cubic","data-aos-delay":"2000","data-aos-duration":"2000","data-aos-offset":"0",children:(0,m.jsxs)("div",{className:"tb_ap_post_overlay",style:g,children:[e.captionStatus||65==e.themeId?null:(0,m.jsxs)("div",{className:"tb_mwf_contant_wrapper",children:[66==e.themeId?(0,m.jsx)(h.Z,{ownerId:i,mediaType:u,postTime:t.createdAt,author:t.author,network:t.network,font:t.font,personalization:a,ThemeRule:e}):null,e.hideContent||63==e.themeId?null:(0,m.jsx)(r.Z,{item:t,content:w,font:e.font,ThemeRule:e,personalization:a,contentTitle:t.contentTitle},t.id)]}),66!=e.themeId?(0,m.jsx)(h.Z,{ownerId:i,mediaType:u,postTime:t.createdAt,author:t.author,network:t.network,font:t.font,personalization:a,ThemeRule:e}):null,(0,m.jsx)("div",{})]})})]})})})}}const w=(0,p.oF)();class C extends o.PureComponent{constructor(){super(...arguments),this.state={postData:[],postDataUpdate:[],postDataContent:[],tempArray:[],rowCount:0},this.dataFilter=()=>{const{postData:t,wall:e}=this.props,a=t&&t.length>0&&t.map(((t,e)=>this.props.completeDataObject[t]));let o=(0,p.tf)();const s=1==o?4:2==o?6:e.ThemeRule.numberOfCoumn&&e.ThemeRule.numberOfCoumn>5?e.ThemeRule.numberOfCoumn:6,n=a&&a.map(((t,e)=>e<s&&t.postFileNew?{...t,stopAnimation:!0}:t)),i=n&&n.filter((t=>t.file&&""!=t.file&&t));w?this.setState({postDataContent:i.filter(((t,e)=>e<s)),tempArray:a.slice(0,s),postDataUpdate:i,rowCount:s},(()=>this.addClass())):this.setState({postDataContent:i,tempArray:a.slice(0,s),postDataUpdate:i,rowCount:s})},this.addClass=()=>{const{postDataUpdate:t,rowCount:e}=this.state,{postData:a,wall:o}=this.props;if(e<t.length)for(let s=1;s<=t.length;s++)setTimeout((()=>{const{postDataContent:t,postDataUpdate:o,tempArray:n}=this.state;let i=[...o];const l=(s-1)%e,p=o.length-s;let h=o[p];if(p<t.length&&(h=n.pop()),i[l]=h,o[l]=h,this.setState((t=>({...t,postDataContent:i.slice(0,e),postDataUpdate:o}))),s==o.length){const t=a&&a.length>0&&a.map(((t,e)=>this.props.completeDataObject[t])),o=t.map(((t,a)=>a<e?{...t,stopAnimation:!0}:t));this.setState({postDataContent:o.filter(((t,a)=>a<e)),tempArray:t.slice(0,e),postDataUpdate:o,rowCount:e},(()=>this.addClass()))}}),o.ThemeRule.slideDelay?1e3*o.ThemeRule.slideDelay*s:1e4*s)},this.onLoadMasonry=()=>{var t=document.querySelector(".tb_ap_post_container");t&&this.props.managePostHeight(t.style.height)}}componentDidMount(){const{postData:t}=this.props;this.setState({postData:t},(()=>this.onLoadMasonry())),l().init(),this.dataFilter()}componentWillReceiveProps(t){const{postData:e}=t;this.setState({postData:e},(()=>{this.onLoadMasonry(),w||this.dataFilter()}))}render(){const{wall:t,clickToShowPopUp:e,onClickToCTA:a,heightUpdate:o,themeHeight:s}=this.props,{postDataContent:n}=this.state,i=t.ThemeRule.numberOfCoumn&&t.ThemeRule.numberOfCoumn>5?t.ThemeRule.numberOfCoumn:8;return n&&n.length>0?(0,m.jsx)("div",{id:"".concat(66==t.ThemeRule.themeId?"squre":67==t.ThemeRule.themeId?"pixel":"reels","_").concat(t.ThemeRule.themeId),className:"tb_ap_post_container clearfix ".concat(w?"display":"embed"),children:(0,m.jsx)("div",{className:"tb_ap_post_row",children:(0,m.jsx)("div",{className:"tb_ap_post_small ".concat(6==i?"size3x2":18==i?"size6x3":32==i?"size8x6":"size4x2"),children:n.map(((n,i)=>(0,m.jsx)(g,{heightUpdate:o,themeHeight:s,ownerId:t.Wall.owner,itemData:n,itemIndex:i,personalization:t.Personalization,ThemeRule:t.ThemeRule,wallID:t.Wall.id,clickToShowPopUp:e,onClickToCTA:a},n.id)))})})},n):null}}const f=(0,s.$j)(null,(t=>({managePostHeight:e=>t((0,n.B0)(e))})))(C)}}]);
//# sourceMappingURL=8345.a69e4dfd.chunk.js.map