"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[854],{20854:(e,l,a)=>{a.r(l),a.d(l,{addScript:()=>I,default:()=>R,isEditor:()=>L,onLoad:()=>A});var t=a(89379),n=a(9950),s=a(73068),r=a(15255),o=a(73878),i=a(80415),d=a(52867),h=a(66345),u=a(19015),p=a(87988),c=a.n(p),w=a(44414);const m=n.lazy(()=>a.e(8689).then(a.bind(a,88689))),j=n.lazy(()=>a.e(5505).then(a.bind(a,25505))),g=n.lazy(()=>Promise.all([a.e(2772),a.e(4674)]).then(a.bind(a,84674))),b=n.lazy(()=>Promise.all([a.e(5446),a.e(7917),a.e(8768),a.e(4296)]).then(a.bind(a,33111))),x=n.lazy(()=>a.e(2665).then(a.bind(a,92665))),D=n.lazy(()=>Promise.all([a.e(804),a.e(8615),a.e(8940),a.e(1209),a.e(3464),a.e(2433)]).then(a.bind(a,13147))),v=n.lazy(()=>Promise.all([a.e(804),a.e(8940),a.e(1209),a.e(8389),a.e(3464),a.e(4877)]).then(a.bind(a,64877))),f=n.lazy(()=>a.e(9563).then(a.bind(a,79563))),S=n.lazy(()=>a.e(495).then(a.bind(a,20495))),k=n.lazy(()=>a.e(5600).then(a.bind(a,5600))),y=n.lazy(()=>a.e(8813).then(a.bind(a,88813))),F=n.lazy(()=>a.e(2833).then(a.bind(a,82833))),P=n.lazy(()=>a.e(2902).then(a.bind(a,82902))),U=n.lazy(()=>a.e(5002).then(a.bind(a,85002))),E=n.lazy(()=>Promise.all([a.e(8092),a.e(804),a.e(8615),a.e(6002),a.e(8370)]).then(a.bind(a,66937))),z=n.lazy(()=>Promise.all([a.e(8768),a.e(9430)]).then(a.bind(a,48768))),I=e=>{const l=document.createElement("script");l.src=e,l.defer=!0,document.head.appendChild(l)},L=!!window.isEditor,A=()=>{window.jQuery||I("".concat(i.M$,"/js/jquery.min.js?ver=1")),I("".concat(i.M$,"/js/slackdown.js?ver=1"))},W=e=>{var l;return e.loader&&null!=e.loader.loader&&null==e.error.errorWithMessage&&(!e.error.planLimit||h.HY)&&(null==e.error.themeError||Object.keys(e.error.themeError).length>0&&0==e.error.themeError.error_code||1===(null===(l=e.wall)||void 0===l?void 0:l.Personalization.demoWall))?(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(m,(0,t.A)({},e))}):!h.HY&&(e.error.errorWithMessage||e.error.planLimit||e.error.themeError)?(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(j,(0,t.A)({},e))}):null},M=(0,s.componentWillAppendToBody)(e=>{let{children:l}=e;return l}),_=e=>{let{appData:l}=e;const a=!!(l.wall.UserDetail&&Object.keys(l.wall.UserDetail).length>0);let t=""!=l.webFilters&&l.webFilters?l.webFilters.map(e=>{let{networkId:l}=e;return l}):null;const n=!(!a||l.wall.UserDetail.planId.includes("53"))||!!(h.uS&&l.wall.refere&&Object.keys(l.wall.refere).length>0),s=h.HY&&l.wall.User.referePageLink?l.wall.User.referePageLink:h.uS?l.wall.refere.referePageLink:(0,d.hZ)(t,l.wallID)[0],r=h.HY&&l.wall.User.referePage?l.wall.User.referePage:h.uS?l.wall.refere.referePage:(0,d.hZ)(t,l.wallID)[1];return n?(0,w.jsx)("a",{href:s,target:"_blank",style:{display:"none"},"aria-label":r,children:r}):null};class O extends n.Component{constructor(){super(...arguments),this.state={errorData:null,render:""},this.onLoadEditor=()=>{if(h.IU)try{window.addEventListener("message",this.handleMessage)}catch(e){console.log("error",e)}else window.location.href.includes("addfeedload=load")&&window.addEventListener("message",this.addFeedReloadTheme)},this.handleMessage=e=>{const{type:l,data:a}=e.data;if("reloadWebsite"==l){const e=JSON.parse(a);console.warn("payload 1",e),this.setState({render:(0,r.A)()});const{onUpdateEditor:l}=this.props;l(e)}},this.addFeedReloadTheme=e=>{const{type:l,data:a}=e.data;if("reloadTheme"==l){const{onUpdateEditor:e}=this.props;e(a)}}}componentWillMount(){h.aD&&(c().init(),a.e(7556).then(a.bind(a,67556)))}componentDidMount(){setTimeout(()=>A(),200),this.onLoadEditor()}componentDidUpdate(e,l){var a,t,n;let s=null===(a=e.appData.wall)||void 0===a||null===(t=a.Personalization)||void 0===t?void 0:t.demoWall;var r;(null===(n=e.appData.error)||void 0===n?void 0:n.themeError)!==l.errorData&&(this.setState({errorData:null===(r=e.appData.error)||void 0===r?void 0:r.themeError}),"function"===typeof window.onSetErrorCode&&null!==this.state.errorData&&window.onSetErrorCode(this.state.errorData,s))}componentWillUnmount(){h.IU?window.removeEventListener("message",this.handleMessage):window.location.href.includes("addfeedload=load")&&window.removeEventListener("message",this.addFeedReloadTheme)}render(){var e,l,a,s,r,o,i,u,p,c,m;const{appData:j,modalPop:I,spotlight:A}=this.props,{render:O}=this.state,R=!!(j&&j.wall&&Object.keys(j.wall).length>0&&j.wall.UserDetail&&Object.keys(j.wall.UserDetail).length>0),T=!(!h.aD||!A.status),C=null!==(e=j.wall)&&void 0!==e&&null!==(l=e.UgcSettings)&&void 0!==l&&l.onsite_status&&null!==(a=j.wall)&&void 0!==a&&null!==(s=a.PhotoBoothSettings)&&void 0!==s&&s.photo_booth_status?1:null!==(r=j.wall)&&void 0!==r&&null!==(o=r.PhotoBoothSettings)&&void 0!==o&&o.photo_booth_status?3:2;return(0,w.jsx)(w.Fragment,{children:!h.aD||window.location.href.includes("onsite-upload")||1!=j.isStudio||d.dm||L||window.location.href.includes("editor=1")?(0,w.jsxs)(w.Fragment,{children:[h.Vn?null:(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(P,{})}),j&&j.wall&&Object.keys(j.wall).length>0&&!window.location.href.includes("onsite-upload")?(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(g,{wall:j.wall})}):null,I.onSiteIsShowPopUp&&null!==j&&void 0!==j&&j.wall?(0,w.jsxs)(M,{children:["  ",(0,w.jsxs)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:[" ",h.aD&&2!=C?(0,w.jsx)(b,{wall:null===j||void 0===j?void 0:j.wall,wallId:null===j||void 0===j||null===(i=j.wall)||void 0===i||null===(u=i.Wall)||void 0===u?void 0:u.id,feeds:null===j||void 0===j?void 0:j.feeds,isFreeAdsStatus:j.postData.isFreeAdsStatus,snapType:C}):(0,w.jsx)(z,{wall:null===j||void 0===j?void 0:j.wall,wallId:null===j||void 0===j||null===(p=j.wall)||void 0===p||null===(c=p.Wall)||void 0===c?void 0:c.id,feeds:null===j||void 0===j?void 0:j.feeds,isFreeAdsStatus:j.postData.isFreeAdsStatus})," "]})," "]}):null,(0,n.createElement)(W,(0,t.A)((0,t.A)({},j),{},{key:O,keyRender:O,spotlight:A})),R&&j.wall.UserDetail.planId.includes("53")&&!h.aD?(0,w.jsxs)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:[(0,w.jsx)(S,{appData:j})," "]}):null,null!==j&&void 0!==j&&null!==(m=j.postData)&&void 0!==m&&m.isFreeAdsStatus?(0,w.jsxs)(M,{children:[(0,w.jsxs)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:[(0,w.jsx)(k,{appData:j})," "]}),window.location.href.includes("editor=1")||(0,d.b4)()?"":(0,w.jsxs)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:[(0,w.jsx)(y,{appData:j})," "]})]}):null,!T&&I.isShowPopUp?h.HY&&(0,d.qs)()?(0,w.jsxs)(M,{children:[" ",(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(v,{wall:j.wall,data:I.data,languageSetting:j.languageSetting,networkData:j.networkData,postData:j.postData,brandingNetworks:""!=j.webFilters&&j.webFilters?j.webFilters.map(e=>{let{networkId:l}=e;return l}):null})})," "]}):(0,w.jsxs)(M,{children:[" ",(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(D,{wall:j.wall,isShowPopUp:I.isShowPopUp,data:I.data,languageSetting:j.languageSetting,networkData:j.networkData,postData:j.postData,brandingNetworks:""!=j.webFilters&&j.webFilters?j.webFilters.map(e=>{let{networkId:l}=e;return l}):null},I.isShowPopUp)})," "]}):null,h.aD&&!T&&j.announcements?(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(U,{announcements:j.announcements})}):null,I.reportStatus&&h.yR?(0,w.jsxs)(M,{children:[" ",(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(f,{item:I.reportData,wall:j.wall})})," "]}):null,I.shareStatus&&h.yR?(0,w.jsxs)(M,{children:[" ",(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(x,{postLink:I.shareData.link,userName:I.shareData.author.name})})," "]}):null,j&&j.wall&&Object.keys(j.wall).length>0&&h.yR?(0,w.jsx)(M,{children:(0,w.jsx)(_,{appData:j})}):null,T?(0,w.jsx)(n.Suspense,{fallback:(0,w.jsx)(w.Fragment,{}),children:(0,w.jsx)(E,{itemData:A.data,wall:j.wall})}):null]}):(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(F,{wallID:j.wallID})})})}}const R=(0,o.Ng)(e=>({appData:e.appData,modalPop:e.modalPop,spotlight:e.spotlight}),e=>({onUpdateEditor:l=>e((0,u.qI)(l))}))(O)}}]);