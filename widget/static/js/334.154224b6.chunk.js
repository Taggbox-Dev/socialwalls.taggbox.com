"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[334],{40334:(t,e,i)=>{i.r(e),i.d(e,{default:()=>x});var o=i(72791),s=i(88890),n=i.n(s),a=i(58290),l=i(39852),r=i.n(l),h=i(54122),c=i(2703),d=i(80184);const p={transitionDuration:0,horizontalOrder:!0};var m,u,g=!1,w=0;const T=(0,c.oF)(),v=(0,c.hz)();class b extends o.PureComponent{constructor(){super(...arguments),this.state={rootWidth:document.querySelector(".tb_app_container").clientWidth-1,wHeight:window.innerHeight,height:0,switcher:0,aiy:0,newPersons:[],count:0,loading:!1,scrollheight:0,postWidth:0,cardNumber:0},this.scrollDiv_init=()=>{u=document.getElementById("marqueecontainer"),g=!1,(u||{}).scrollTop=0,w=0,this.onScrollData(),this.onScrollWPosts()},this.onScrollData=()=>{const{wall:t}=this.props;t.Personalization.scrollDelay&&(m=setInterval((()=>{this.scrollDiv()}),90))},this.onScrollWPosts=()=>{const{themeHeight:t}=this.props;u=document.getElementById("marqueecontainer");var e=document.getElementById("wPosts");if(e)if(window.innerHeight>e.clientHeight){var i=window.innerHeight,o=e.clientHeight;e.setAttribute("style","position: relative; margin-bottom: ".concat(i,"px; min-height:").concat(o,"px"))}else u.setAttribute("style","overflow: auto; height : calc(100vh - ".concat(t||0,"px)"))},this.scrollDiv=()=>{const{postData:t}=this.props,e=t&&t.length?n()(".postItem").eq(t.length-1).height()/2:300;m&&clearInterval(m),g?((u||{}).scrollTop=w=0,g=!1,this.onScrollData()):((u||{}).scrollTop=w,w++,g=122464==this.props.wall.Personalization.wallId?(u||{}).scrollTop>=n()("#wPosts").height()-(u||{}).offsetHeight:(u||{}).scrollTop>=(u||{}).scrollHeight-(u||{}).offsetHeight-e,this.onScrollData())},this.onLoadTheme=()=>{const{postData:t}=this.props;t&&t.length>0&&setTimeout((()=>this.setState({loading:!1},(()=>this.scrollDiv_init()))),1e3)},this.onResponsiveTheme=()=>{const{wall:t}=this.props,e=document.querySelector(".tb_app_container").clientWidth-1;if(e>0){let i=null,o=null,s=null,n=null;const a=t.Personalization.minimumPostWidth;i=e/a;let l=Math.trunc(i);s=e%a,o=s/l,n=i>=1?a+o:a-o,this.setState({postWidth:n,cardNumber:i,wHeight:window.innerHeight})}}}componentDidMount(){if(setTimeout((()=>{this.setState({rootWidth:document.querySelector(".tb_app_container").clientWidth})}),2e3),this.onResponsiveTheme(),window.addEventListener("resize",(()=>{this.setState({rootWidth:document.querySelector(".tb_app_container").clientWidth,wHeight:window.innerHeight},(()=>this.onResponsiveTheme()))})),T){document.querySelector(".tb_app_container").addEventListener("wheel",(t=>t.preventDefault()),{passive:!1}),this.onLoadTheme(),this.props.heightUpdate()}}componentWillUnmount(){setTimeout((()=>{m&&v&&(clearInterval(m),this.setState({loading:!1}))}),1e3)}componentDidUpdate(t,e){const{postData:i,wall:o}=t;setTimeout((()=>this.onResponsiveTheme()),v?1e3:0),T&&this.props.heightUpdate(),i!=this.props.postData&&T&&setTimeout((()=>this.setState({loading:!1},(()=>{m&&clearInterval(m),this.scrollDiv_init()}))),1e3)}render(){const{loading:t,postWidth:e}=this.state,{themeHeight:i}=this.props;let{postData:s,completeDataObject:n,wall:l,adjustWidth:c,onClickToCTA:m,clickToShowPopUp:u}=this.props;const g={backgroundColor:l.ThemeRule.cardColor,padding:"".concat(l.ThemeRule.spacing,"px"),borderRadius:"".concat(l.ThemeRule.borderRadius,"px")};return(0,d.jsx)(d.Fragment,{children:e?(0,d.jsx)("div",{className:"themeSquare ".concat(T?"themeModrnWatrFall display":"widget"),children:(0,d.jsx)("div",{id:"marqueecontainer",style:{overflow:"auto",height:"calc(100vh - ".concat(i,"px)")},children:(0,d.jsx)(r(),{id:"wPosts",className:"theme".concat(l.ThemeRule.themeId),elementType:"div",options:p,disableImagesLoaded:!1,updateOnEachImageLoad:!0,children:s.map(((i,r)=>{const p=n[i];if(s&&s.length-1==r&&setTimeout((()=>{let t=document.querySelectorAll("img[data-is-optmized='0']");t&&t.length>0&&t.forEach((t=>{t.setAttribute("src",t.getAttribute("data-src")),t.setAttribute("data-is-optmized","1")}))}),1500),l.Personalization.postAuthor&&!p.author.isInstaUser||p.file)return e?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{id:'"postId'.concat(p.id),className:"feedId".concat(p.feedId," postItem item flatCard  ").concat(p.network.name,"Taggbox ").concat(p.theme48&&"onlyTextCard"===p.theme48.class1?"onlyTextCard":""," completeFadeIn"),"data-post-id":p.id,"data-highlight":p.highlight,"data-pin":p.pin,style:{padding:l.ThemeRule.padding/2,margin:0,width:e,minWidth:0,left:0,top:0},"data-created":p.createdAt,children:(0,d.jsx)("div",{className:"post",style:g,children:(0,d.jsx)("div",{className:"postContent",children:t?(0,d.jsx)(a.Z,{height:300}):(0,d.jsx)(o.Suspense,{fallback:(0,d.jsx)(a.Z,{height:300}),children:(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(h.Z,{ownerId:l.Wall.owner,wall:l,itemData:p,itemIndex:r,adjustWidth:c,personalization:l.Personalization,ThemeRule:l.ThemeRule,clickToShowPopUp:u,wallID:l.Wall.id,onClickToCTA:m},r)})})})})},r)," "]}):null}))})},i)}):null})}}const x=(0,o.memo)(b)}}]);
//# sourceMappingURL=334.154224b6.chunk.js.map