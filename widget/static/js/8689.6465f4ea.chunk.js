"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[8689],{88689:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var a=n(89379),i=n(9950),s=n(19015),r=n(73878),l=n(52867),o=n(80415),c=n(66345),d=n(78213),g=n(44414);const u=i.lazy(()=>n.e(2804).then(n.bind(n,2804))),h=i.lazy(()=>n.e(726).then(n.bind(n,80726))),p=i.lazy(()=>n.e(693).then(n.bind(n,50693))),m=i.lazy(()=>n.e(501).then(n.bind(n,40501))),b=i.lazy(()=>n.e(56).then(n.bind(n,70056))),k=i.lazy(()=>Promise.all([n.e(8400),n.e(6337)]).then(n.bind(n,65518)));class f extends i.PureComponent{constructor(){super(),this.handleResize=()=>{this.containerRef.current&&this.setState({containerSize:{width:this.containerRef.current.offsetWidth,height:this.containerRef.current.offsetHeight}})},this.onLoadSpotLight=()=>{if(c.aD&&!c.yR){const{postData:t}=this.props;if(t.completeDataObject&&Object.keys(t.completeDataObject).length>0){var e=null;Object.entries(t.completeDataObject).forEach(t=>{let[n,a]=t;1==(null===a||void 0===a?void 0:a.highlight)&&null==e&&(e=a)}),e&&Object.keys(e).length>0&&(0,d.ar)(e)}}},this.state={containerSize:{width:null,height:null},parentID:""},this.containerRef=i.createRef()}componentDidMount(){(0,l.j1)(this.props.wall.Personalization.widgetTheme),window.addEventListener("resize",this.handleResize),this.containerRef.current&&this.setState({containerSize:{width:this.containerRef.current.offsetWidth,height:this.containerRef.current.offsetHeight}}),this.onLoadSpotLight()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}componentDidUpdate(){var e;let t=document.querySelector(".tb_app_container"),n=l.wV?l.wV:null===t||void 0===t||null===(e=t.parentNode)||void 0===e?void 0:e.id;this.setState({parentID:n})}render(){var e,t,n,s,r,d,f,v;const{wall:S,reviewFilters:j,webFilters:w,postData:B,languageSetting:x,filter_tags:D,spotlight:z}=this.props,_=!!(S.Banner&&Object.keys(S.Banner).length>0&&(1===S.Banner.status&&1===S.Banner.banner_position||1===S.BannerImage.status||"1"===S.Banner.banner_position)),y=!!(S.Banner&&Object.keys(S.Banner).length>0&&(1===S.Banner.status&&2===S.Banner.banner_position||"2"===S.Banner.banner_position)),I=c.uS?![55,60,16,47,57].includes(S.Personalization.widgetTheme):![55,52,60,16,47,57,61].includes(S.Personalization.widgetTheme),R=!!(!c.aD&&S.Banner&&Object.keys(S.Banner).length>0&&1===S.Banner.status&&6==S.Banner.bannerType&&0===S.Personalization.filterStatus&&57!=S.Personalization.widgetTheme),T=c.uS?1===S.Personalization.filterStatus:!!(w&&w.length>1),C=!!(D&&D.length>0),F=!(!c.aD||!z.status);let P=""!=w&&w&&w.length>0?w.map(e=>{let{Network:t}=e;return t.id}):null;!c.HY&&null!==S&&void 0!==S&&null!==(e=S.Background)&&void 0!==e&&e.image&&S.Background.image.includes(o.vr)&&(S.Background.image=String(S.Background.image).replace(o.Vy,""));const H=0===(null===S||void 0===S||null===(t=S.Background)||void 0===t?void 0:t.transparent)||null!==S&&void 0!==S&&null!==(n=S.Background)&&void 0!==n&&n.image&&c.uS?{backgroundImage:null!==S&&void 0!==S&&null!==(s=S.Background)&&void 0!==s&&s.image?"url(".concat(S.Background.image,")"):"",backgroundColor:null===S||void 0===S||null===(r=S.Background)||void 0===r?void 0:r.color}:null;return(0,g.jsxs)("div",{className:"tb_app_container ".concat(F?"tb_spotlight_ac":""),style:{minHeight:c.yR?[47,16,49,55,60,52].includes(S.Personalization.widgetTheme)?"100%":"".concat(this.props.postHeight,"px"):null},ref:this.containerRef,children:[c.aD&&!c.Vn&&1===(null===(d=S.CustomTicker)||void 0===d?void 0:d.status)&&1==S.CustomTicker.ticker_position?(0,g.jsx)(p,{CustomTicker:S.CustomTicker,UgcSettings:S.UgcSettings}):null,_&&!F?(0,g.jsxs)(i.Suspense,{fallback:(0,g.jsx)(g.Fragment,{}),children:[" ",(0,g.jsx)(u,{Banner:S.Banner,BannerImage:S.BannerImage,LogoImage:S.LogoImage})]}):"",(0,g.jsxs)("div",{className:"tb_app_wrapper",style:H,children:[R&&_?(0,g.jsx)(i.Suspense,{fallback:(0,g.jsx)(g.Fragment,{}),children:(0,g.jsx)(h,{reviewFilters:j,appendData:B.appendData,wall:S,languageSetting:x,postData:B})}):null,"88"!=S.Personalization.widgetTheme&&(null!==S&&void 0!==S&&null!==(f=S.UserRule)&&void 0!==f&&f.on_site_upload&&S.UgcSettings.onsite_status||c.Qy&&S.UgcSettings.onsite_status&&(c.MH||c.HY&&!(0,l.Nv)(50)))?(0,g.jsxs)(i.Suspense,{fallback:(0,g.jsx)(g.Fragment,{}),children:[" ",(0,g.jsx)(k,{UgcSettings:S.UgcSettings,id:S.Wall.id,tagShopWallId:S.Wall.wallId})," "]}):null,!c.aD&&I&&(T||C)?(0,g.jsxs)(i.Suspense,{fallback:(0,g.jsx)(g.Fragment,{}),children:[" ",(0,g.jsx)(m,{type:S.Personalization.filter_type,webFilters:w,filter_tags:D,appendData:B.appendData,wall:S,languageSetting:x,postData:B})]}):"",F?null:(0,g.jsxs)(i.Suspense,{fallback:(0,g.jsx)(g.Fragment,{}),children:[" ",(0,g.jsx)(b,(0,a.A)((0,a.A)({},this.props),{},{brandingNetworks:P,containerSize:this.state.containerSize,parentID:this.state.parentID}))]}),R&&y?(0,g.jsx)(i.Suspense,{fallback:(0,g.jsx)(g.Fragment,{}),children:(0,g.jsx)(h,{reviewFilters:j,appendData:B.appendData,wall:S,languageSetting:x,postData:B})}):null]}),y&&!F?(0,g.jsxs)(i.Suspense,{fallback:(0,g.jsx)(g.Fragment,{}),children:[" ",(0,g.jsx)(u,{Banner:S.Banner,BannerImage:S.BannerImage,LogoImage:S.LogoImage})]}):"",c.aD&&!c.Vn&&1===(null===(v=S.CustomTicker)||void 0===v?void 0:v.status)&&2==S.CustomTicker.ticker_position?(0,g.jsx)(p,{CustomTicker:S.CustomTicker,UgcSettings:S.UgcSettings}):null]})}}const v=(0,r.Ng)(e=>{if(!0===e.postHeight.manage_height){return{postHeight:e.postHeight.data.replace("px",""),renderId:e.renderId}}return{renderId:e.renderId}},e=>({managePostHeight:t=>e((0,s.V3)(t))}))(f)}}]);