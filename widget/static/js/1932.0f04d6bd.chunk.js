"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[1932],{91932:(t,e,a)=>{a.r(e),a.d(e,{default:()=>r});var n=a(72791),s=a(2703),l=a(80184);const i=n.lazy((()=>Promise.all([a.e(9705),a.e(7122)]).then(a.bind(a,37122))));var o;class h extends n.PureComponent{constructor(){super(...arguments),this.state={columns:[],activeID:null,data:[],cardData:[]},this.componentDidMount=()=>{o=setInterval((()=>this.onUpdateTimeInterVal()),3e3),this.props.heightUpdate()},this.onLoadData=()=>{const{cardData:t}=this.state;if(t&&t.length){const e=t.map(((t,e)=>({id:e,referenceData:null})));this.setState({columns:e,data:t})}},this.postDataFilter=()=>{let{postData:t,completeDataObject:e,wall:a}=this.props,n=[];const l=t.map((t=>e[t])),i=(0,s.tf)(),o=a.ThemeRule.numberOfCoumn,h=a.isEditor||1!==i?a.isEditor||2!==i?o||5:3:2;for(let s=0;s<l.length;s++){const t=s%h;n[t]||(n[t]=[]),n[t].push(l[s])}for(let s=0;s<n.length;s++)if(n[s].length<3){const t=3-n[s].length;for(let e=0;e<t;e++)n[s]=[...n[s],n[Math.floor(Math.random()*n.length)][Math.floor(Math.random()*n[s].length)]]}this.setState({cardData:n},(()=>this.onLoadData()))},this.onUpdateTimeInterVal=()=>{const{activeID:t,columns:e}=this.state;if(t||0==t){let a=parseInt(t)+1;a>=e.length&&(a=0),e[a]&&this.setState({activeID:a})}else{let t=0;e[t]&&this.setState({activeID:t})}},this.onUpdateRef=(t,e)=>{let{columns:a}=this.state;a&&a.length>0&&a[t]&&(a[t].referenceData=e),this.setState({columns:a})},this.CONVERT_OBJ_TO_ARRAY=t=>Object.values(t).map((t=>({...t})))}componentWillMount(){this.postDataFilter()}componentDidUpdate(t,e){this.state.data!==e.data&&this.onLoadData();const{wall:a}=this.props;a.isDisplay&&(a.Banner.bannerUpdate!=t.wall.Banner.bannerUpdate||a.Banner.banner_position!=t.wall.Banner.banner_position||a.BannerImage.status!=t.wall.BannerImage.status||a.ThemeRule.themeId!=t.wall.ThemeRule.themeId)&&a.isEditor&&(this.props.heightUpdate(),setTimeout((()=>window.dispatchEvent(new Event("resize"))),1e3))}componentWillUnmount(){o&&clearInterval(o)}render(){let{themeHeight:t,wall:e}=this.props;const{activeID:a,cardData:s}=this.state;return(0,l.jsx)("div",{id:"falling-container",className:"tb_wall_wrap__ ".concat(64==e.ThemeRule.themeId?"theme64 card".concat(e.ThemeRule.numberOfCoumn," ").concat(e.isDisplay?"display":""):"atmosphereReels69 embed"),style:{height:"calc(100vh - ".concat(t+4,"px)")},children:s&&s.length?s.map(((t,e)=>(0,l.jsx)(n.Suspense,{fallback:(0,l.jsx)(l.Fragment,{}),children:(0,n.createElement)(i,{...this.props,key:"update_".concat(e),pItem:this.CONVERT_OBJ_TO_ARRAY(t),pIndex:e,postData:s,onUpdateRef:this.onUpdateRef,activeID:a})}))):null})}}const r=h}}]);
//# sourceMappingURL=1932.0f04d6bd.chunk.js.map