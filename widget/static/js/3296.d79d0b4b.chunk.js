"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[3296],{43296:(t,e,a)=>{a.r(e),a.d(e,{default:()=>u});var s=a(72791),n=a(2703),i=a(88890),l=a.n(i),o=a(38077),c=a(49705),r=a(80184);class p extends s.Component{constructor(t){super(t),this.onUpdate=()=>{setTimeout((()=>{const{pIndex:t}=this.props;this.props.onUpdateRef(t,null),window.dispatchEvent(new Event("resize")),setTimeout((()=>{l()("#tb_wall_list_wrap___".concat(t+1)).addClass("tb_fc_animation")}),250)}),100)},this.myRef=s.createRef()}componentWillReceiveProps(t){const{activeID:e,pIndex:a}=t;e==a&&this.myRef.current&&this.myRef.current.swiper.slideNext()}render(){const{pItem:t,pIndex:e,wall:a,postData:s}=this.props;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(c.tq,{ref:this.myRef,slidesPerView:"auto",direction:"vertical",spaceBetween:0,mousewheel:!0,loop:!0,speed:2e3,allowTouchMove:!1,autoplay:{enabled:!1,disableOnInteraction:!0},id:"tb_wall_list_wrap___".concat(e+1),className:"swiper-container tb_wall_list_wrap___",style:{width:"".concat(100/s.length,"%")},onAfterInit:this.onUpdate,children:t&&t.map(((t,s)=>t.file&&""!=t.file&&(0,r.jsx)(c.o5,{children:(0,r.jsx)(o.Z,{columnsId:e,activeIndex:s,item:t,wall:a},s)},"item_".concat(s,"_").concat(e))))},"tb_wall_list_wrap___".concat(e+1))})}}const h=p;var d;class m extends s.PureComponent{constructor(){super(...arguments),this.state={intialize:!1,columns:[],activeID:null,data:[],cardData:[],isMobile:!1,isTablet:!1},this.onLoadData=()=>{const{cardData:t}=this.state;let e=[];t&&t.length>0&&(t.map(((t,a)=>{e.push({id:a,referenceData:null})})),this.setState({columns:e,data:t}))},this.componentDidMount=()=>{d=setInterval((()=>this.onUpdateTimeInterVal()),3e3),this.props.heightUpdate()},this.postDataFilter=()=>{let{postData:t,completeDataObject:e,wall:a}=this.props;const s=t.map((t=>e[t]));let i=[],l=(0,n.tf)();const o=1==l?2:2==l?3:a.ThemeRule.numberOfCoumn?a.ThemeRule.numberOfCoumn:5;for(let n=0;n<s.length;n+=o)for(let t=0;t<o;t++){let e=n+t;const a=e%o;i[a]||(i[a]=[]),s[e]&&i[a].push(s[e])}this.setState({cardData:i},(()=>this.onLoadData()))},this.onUpdateTimeInterVal=()=>{const{activeID:t,columns:e}=this.state;if(t||0==t){let a=parseInt(t)+1;a>=e.length&&(a=0),e[a]&&this.setState({activeID:a})}else{let t=0;e[t]&&this.setState({activeID:t})}},this.onUpdateRef=(t,e)=>{let{columns:a}=this.state;a&&a.length>0&&a[t]&&(a[t].referenceData=e),this.setState({columns:a})},this.CONVERT_OBJ_TO_ARRAY=(t,e)=>Object.keys(t).length>0?Object.keys(t).map((e=>({...t[e]}))):[]}componentWillMount(){this.postDataFilter()}componentWillUnmount(){d&&(0,n.hz)()&&clearInterval(d)}componentDidUpdate(t,e){this.state.data!==e.data&&this.onLoadData(),this.props.heightUpdate(),setTimeout((()=>window.dispatchEvent(new Event("resize"))),1e3)}render(){let{wall:t,themeHeight:e}=this.props;const{activeID:a,cardData:s}=this.state;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{id:"falling-container",className:"tb_wall_wrap__ theme64 card".concat(t.ThemeRule.numberOfCoumn," ").concat((0,n.oF)()?"display":""),style:{height:"calc(100vh - ".concat(e+4,"px)")},children:s&&s.length>0?s.map(((e,n)=>(0,r.jsx)(h,{pItem:this.CONVERT_OBJ_TO_ARRAY(e),pIndex:n,postData:s,wall:t,onUpdateRef:this.onUpdateRef,activeID:a},"update_".concat(n)))):null})})}}const u=(0,s.memo)(m)}}]);
//# sourceMappingURL=3296.d79d0b4b.chunk.js.map